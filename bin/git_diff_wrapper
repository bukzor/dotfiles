#!/bin/sh

if tty -s < /dev/stdout; then
    vimdiff "$2" "$5" < /dev/stdout
else
	if [ "$3" = '.' ]; then
		if ! git diff --no-ext-diff -- "$2" "$5"; then
			echo "git diff --no-ext-diff -- \"$2\" \"$5\"" > /dev/tty
		fi
	else
		git diff --no-ext-diff "$3" -- "$5"
	fi
fi
